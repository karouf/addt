name: claude
description: Claude Code - AI coding assistant by Anthropic
entrypoint2:
  - bash
  - -i
entrypoint: claude
default_version: stable
auto_mount: false
dependencies: []
credential_script: credentials.sh

# export DISABLE_AUTOUPDATER=1
# https://code.claude.com/docs/en/setup#auto-updates
# IS_SANDBOX=1 - for sandbox mode
# https://github.com/anthropics/claude-code/issues/927

env_vars:
  - ANTHROPIC_API_KEY
  - DISABLE_AUTOUPDATER=1
#  - IS_SANDBOX=1
#  - ADDT_EXTENSION_CLAUDE_YOLO
otel_vars:
  # Claude Code specific - enable telemetry by default when OTEL is active
  - CLAUDE_CODE_ENABLE_TELEMETRY=1
  - OTEL_LOG_USER_PROMPTS=true
  - OTEL_LOG_TOOL_DETAILS=true
  # Standard OTEL vars (pass-through from host or addt config)
  - OTEL_EXPORTER_OTLP_ENDPOINT
  - OTEL_EXPORTER_OTLP_PROTOCOL=http/json
  - OTEL_EXPORTER_OTLP_HEADERS
  - OTEL_SERVICE_NAME=addt
  - OTEL_METRICS_EXPORTER=otlp
  - OTEL_LOGS_EXPORTER=otlp
  - OTEL_METRIC_EXPORT_INTERVAL=10000
  - OTEL_LOGS_EXPORT_INTERVAL=10000
mounts:
  - source: ~/.claude
    target: /home/addt/.claude
  - source: ~/.claude.json
    target: /home/addt/.claude.json
flags:
  - flag: "--yolo"
    description: "Bypass permission checks"
    env_var: ADDT_EXTENSION_CLAUDE_YOLO
